#!/usr/bin/env bash
#
# Description: This script allows you to connect to the wifi.
# Dependencies: iw , wpa_supplicant , dhclient
#
#[[ "$UID" -ne "0" ]] && printf " We need root permission to work. Sorry.  :(  " ; exit 1
#
# Variables
device="$(ls "/sys/class/net" | grep "wl")"

#[[ !-e "$HOME/wifi" ]] &&  mkdir "$HOME"/wifi
ip link set $device up
rfkill unblock wifi
iwlist $device scan | grep ESSID &&
  read -p "Type an wifi name (SSID): " ssid
  wpa_passphrase $ssid > $ssid.conf
  sleep 1
  echo "Type a password"
  wpa_supplicant -c $ssid.conf -i $device
